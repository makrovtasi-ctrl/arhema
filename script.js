const products=[{id:1,name:"Produk A",price:150000,image:"https://via.placeholder.com/300",desc:"Deskripsi produk A"},{id:2,name:"Produk B",price:200000,image:"https://via.placeholder.com/300",desc:"Deskripsi produk B"},{id:3,name:"Produk C",price:250000,image:"https://via.placeholder.com/300",desc:"Deskripsi produk C"}];
function updateCartCount(){const cart=JSON.parse(localStorage.getItem("cart")||"[]");document.querySelectorAll("#cart-count").forEach(el=>el.textContent=cart.length);}
function renderProducts(){const list=document.getElementById("product-list");if(list){list.innerHTML=products.map(p=>`<div class="product-card"><img src="${p.image}" alt="${p.name}"><h3>${p.name}</h3><p>Rp ${p.price.toLocaleString()}</p><button onclick="addToCart(${p.id})">Tambah</button><a href="product.html?id=${p.id}">Detail</a></div>`).join("");}}
function renderProductDetail(){const params=new URLSearchParams(location.search);const id=parseInt(params.get("id"));const product=products.find(p=>p.id===id);const container=document.getElementById("product-detail");if(container&&product){container.innerHTML=`<img src="${product.image}" alt="${product.name}"><h2>${product.name}</h2><p>Rp ${product.price.toLocaleString()}</p><p>${product.desc}</p><button onclick="addToCart(${product.id})">Tambah ke Keranjang</button>`;}}
function addToCart(id){const cart=JSON.parse(localStorage.getItem("cart")||"[]");cart.push(products.find(p=>p.id===id));localStorage.setItem("cart",JSON.stringify(cart));updateCartCount();}
function renderCart(){const cart=JSON.parse(localStorage.getItem("cart")||"[]");const container=document.getElementById("cart-items");if(container){if(cart.length===0){container.innerHTML="<p>Keranjang kosong</p>";}else{container.innerHTML=cart.map((item,i)=>`<div>${item.name} - Rp ${item.price.toLocaleString()}<button onclick="removeFromCart(${i})">Hapus</button></div>`).join("");}}}
function removeFromCart(index){const cart=JSON.parse(localStorage.getItem("cart")||"[]");cart.splice(index,1);localStorage.setItem("cart",JSON.stringify(cart));renderCart();updateCartCount();}
document.addEventListener("DOMContentLoaded",()=>{updateCartCount();renderProducts();renderProductDetail();renderCart();});